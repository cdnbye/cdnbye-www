(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{944:function(e,s,t){"use strict";t.r(s);var a=t(1),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"introduction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),t("p",[e._v('This program makes server as a peer (Super Peer) to serve clients that cannot connect to other peers. The master/worker architecture is adopted. The master is responsible for creating and scheduling worker processes, and the worker process is responsible for executing "seeding". Each worker can only seed for one channel, and a channel can be seeded by multiple workers simultaneously.')]),e._v(" "),t("h2",{attrs:{id:"server-spec"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#server-spec"}},[e._v("#")]),e._v(" Server Spec")]),e._v(" "),t("p",[e._v("Each worker process occupies approximately one CPU core, 300MB of memory, and 100Mbps of bandwidth.")]),e._v(" "),t("h2",{attrs:{id:"install-node-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-node-js"}},[e._v("#")]),e._v(" Install Node.js")]),e._v(" "),t("p",[e._v("Ignore this step if you have installed node.js.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://npmmirror.com/mirrors/node/v18.15.0/node-v18.15.0-linux-x64.tar.xz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" -xvf node-v18.15.0-linux-x64.tar.xz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" -p /usr/local/nodejs\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mv")]),e._v(" node-v18.15.0-linux-x64/* /usr/local/nodejs/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ln")]),e._v(" -s /usr/local/nodejs/bin/node /usr/local/bin\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ln")]),e._v(" -s /usr/local/nodejs/bin/npm /usr/local/bin\n")])])]),t("h2",{attrs:{id:"install-pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-pm2"}},[e._v("#")]),e._v(" Install pm2")]),e._v(" "),t("p",[e._v("pm2 is a Node.js application process manager that is used for keeping super peer alive forever.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" i -g pm2\n")])])]),t("h2",{attrs:{id:"download-zip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#download-zip"}},[e._v("#")]),e._v(" Download zip")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://cdn.swarmcloud.net/super-peer.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("Download the zip file"),t("OutboundLink")],1),e._v("ï¼Œupload to your server then unzip.")]),e._v(" "),t("h2",{attrs:{id:"start-super-peer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start-super-peer"}},[e._v("#")]),e._v(" Start Super Peer")]),e._v(" "),t("p",[e._v("The script to start super peer with listening port 8080 is as follows:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" super-peer\npm2 start index.js --name super-peer -- --listenPort "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8080")]),e._v("\n")])])]),t("p",[e._v("Or")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("pm2 start index.js --name super-peer -- --listenPort "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8080")]),e._v(" --accessToken YOUR_TOKEN\n")])])]),t("p",[e._v("YOUR_TOKEN is the self-defined string, which should be same as the one registered in dashboard.")]),e._v(" "),t("h2",{attrs:{id:"auto-startup-optional"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#auto-startup-optional"}},[e._v("#")]),e._v(" Auto Startup(Optional)")]),e._v(" "),t("p",[e._v("Start the program then run:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("pm2 save\npm2 startup\n")])])]),t("h2",{attrs:{id:"register-super-peer-in-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#register-super-peer-in-dashboard"}},[e._v("#")]),e._v(" Register Super Peer in Dashboard")]),e._v(" "),t("p",[e._v('Log in dashboard, click on "P2P Setting" -> "Server as Peer" -> "+Super Peer", input the server URL and bandwidth, then click "Confirm". If the server status shows "Stopped", it means that the server cannot be connected. Please ensure that the firewall configuration is correct.')]),e._v(" "),t("h2",{attrs:{id:"seeding-strategy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#seeding-strategy"}},[e._v("#")]),e._v(" Seeding Strategy")]),e._v(" "),t("p",[e._v("By default, the tracker server will automatically seed based on the current hot channel rankings. You can turn off automatic seeding and do it manually.")]),e._v(" "),t("h2",{attrs:{id:"monitor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monitor"}},[e._v("#")]),e._v(" Monitor")]),e._v(" "),t("p",[e._v("Click on the monitor button of the corresponding server on the page to view information such as the number of current connected peers, uploaded traffic in KB, and system resource usage for each worker process. You can also restart or kill a specific worker process.")])])}),[],!1,null,null,null);s.default=r.exports}}]);